
# 🛍️ 商品比价插件 MVP 产品设计与开发计划

## 📌 项目概述

本项目旨在开发一款浏览器插件，用户输入商品名称后，插件通过调用后端爬虫服务，在京东、淘宝、拼多多、1688 四个平台上抓取相关商品的价格信息，并将比价结果展示在插件中。

## 🎯 产品目标（MVP）

- ✅ 支持用户输入关键词
- ✅ 查询并展示京东、淘宝、拼多多、1688 四个平台的商品价格
- ✅ 插件 UI 简洁可用
- ✅ 后端 API 支持并发抓取、返回结构统一的数据
- ✅ 前后端联调完成，形成可用闭环

## 🧩 项目架构

```
用户浏览器
└── 插件 UI（前端）
    └── 请求商品搜索 → 后端比价服务
        └── 后台爬虫服务（Node.js）
            ├── 京东爬虫模块
            ├── 淘宝爬虫模块
            ├── 拼多多爬虫模块
            ├── 1688爬虫模块
        ← 返回平台比价数据
    ← 在插件界面展示横向价格对比
```

## 📦 插件端（前端）

### 🔧 技术栈

- Chrome 插件 Manifest V3
- HTML + CSS + JavaScript（可扩展为 Vue/React）
- `fetch` 请求后端服务

### 📄 目录结构

```
plugin/
├── manifest.json
├── popup.html / popup.js      // 插件主界面
├── content.js                 // 注入脚本（可选）
├── style.css
└── icons/
```

### ✅ 功能清单

| 模块         | 描述                                      |
|--------------|-------------------------------------------|
| 输入框        | 用户手动输入商品关键词                     |
| 比价按钮      | 向后端接口发送请求                         |
| 结果列表      | 展示平台名、商品标题、价格、链接（前5条）   |
| 错误提示      | 加载失败或无结果时提示                     |

## 🖥️ 后端服务（Node.js 爬虫）

### 🔧 技术栈

- Node.js + Express
- Puppeteer（用于无头浏览器抓取）
- puppeteer-extra-plugin-stealth（绕过反爬机制）
- CORS 支持跨域请求

### 📄 目录结构

```
server/
├── src/
│   ├── routes/search.js        // 主路由：/search?keyword=xxx
│   ├── scrapers/
│   │   ├── jd.js               // 京东爬虫模块
│   │   ├── taobao.js           // 淘宝爬虫模块
│   │   ├── pdd.js              // 拼多多爬虫模块
│   │   └── ali1688.js          // 1688爬虫模块
│   └── app.js                  // 应用入口
├── .env
└── package.json
```

### ✅ API 接口设计

- **接口**：`GET /search?keyword=蓝牙耳机`

- **返回格式**：
```json
{
  "keyword": "蓝牙耳机",
  "data": {
    "jd": [
      { "title": "...", "price": "¥99", "url": "..." },
      ...
    ],
    "taobao": [...],
    "pdd": [...],
    "ali1688": [...]
  }
}
```

## 📅 开发计划

| 周期  | 模块            | 任务内容                                         |
|-------|-----------------|--------------------------------------------------|
| 第1周 | 需求 & 框架搭建  | 明确MVP功能，搭建插件和Node服务框架               |
| 第2周 | 后端爬虫开发     | 实现京东、淘宝、拼多多、1688爬虫模块（返回前5条） |
| 第3周 | 前端插件开发     | 实现插件UI输入、请求、展示逻辑                   |
| 第4周 | 联调 & 测试     | 接口对接、错误处理、超时处理、前后端调试         |
| 第5周 | 优化与部署       | 插件打包、Node服务部署、接口稳定性优化           |

## 🧱 MVP 功能完整性检查

### 插件端

- [x] 输入关键词
- [x] 发送请求
- [x] 展示价格列表
- [ ] 简单样式美化
- [ ] 错误提示完善

### 后端服务

- [x] 支持 `/search` 接口
- [x] 四个平台数据源模块开发完成
- [x] 格式统一返回结果
- [ ] 异常处理与日志记录

## 🧭 后续扩展方向（非MVP）

- 商品历史价格趋势展示（接入慢慢买等）
- 登录功能 / 收藏功能
- 商品相似度排序算法
- 平台优惠券聚合 / 联盟返利系统
- 商品价格波动通知提醒

## 🧰 开发与部署建议

- 后端本地运行命令：
  ```bash
  node src/app.js
  ```

- 浏览器插件开发时，使用本地服务地址：
  ```js
  fetch("http://localhost:3000/search?keyword=蓝牙耳机")
  ```

- Puppeteer部署建议使用 Linux VPS + XVFB 无头浏览器支持，或改用 puppeteer-core + Chrome Path

## 🧑‍💻 作者

- 项目负责人：你
- 技术架构 / UI设计 / 后端爬虫：你自己 or 合作开发者

## 📎 附录

- 京东开放搜索：https://search.jd.com/Search
- 淘宝搜索示例：https://s.taobao.com/search?q=xxx
- 拼多多搜索示例：https://mobile.yangkeduo.com/search_result.html?search_key=xxx
- 1688搜索示例：https://s.1688.com/selloffer/kwxxx.html
